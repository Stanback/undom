{"version":3,"sources":["../src/util.js","../src/undom.js"],"names":["assign","obj","props","let","i","toLower","str","String","toLowerCase","splice","arr","item","add","byValueOnly","findWhere","fn","returnIndex","length","createAttributeFilter","ns","name","o","undom","isElement","node","nodeType","createElement","type","Element","toUpperCase","createElementNS","element","namespace","createTextNode","text","Text","Node","nodeName","this","childNodes","prototypeAccessors","nextSibling","get","p","parentNode","previousSibling","firstChild","lastChild","prototype","appendChild","child","insertBefore","ref","remove","push","replaceChild","removeChild","super","call","nodeValue","prototypeAccessors$1","textContent","set","attributes","__handlers","style","Object","defineProperty","val","setAttribute","getAttribute","_innerHTML","prototypeAccessors$2","children","filter","key","value","setAttributeNS","getAttributeNS","removeAttribute","removeAttributeNS","attr","addEventListener","handler","removeEventListener","dispatchEvent","event","l","t","currentTarget","c","cancelable","_end","bubbles","_stop","target","defaultPrevented","Document","Event","opts","stopPropagation","stopImmediatePropagation","preventDefault","document","defaultView","SVGElement","documentElement","body"],"mappings":"oKAAO,QAASA,GAAOC,EAAKC,GAC3B,IAAKC,GAAIC,KAAKF,GAAOD,EAAIG,GAAKF,EAAME,GAG9B,QAASC,GAAQC,GACvB,MAAOC,QAAOD,GAAKE,cAGb,QAASC,GAAOC,EAAKC,EAAMC,EAAKC,GACtCV,GAAIC,GAAIM,EAAMI,EAAUJ,EAAKC,GAAM,EAAME,IAAgB,CAEzD,QADKT,IAAGQ,EAAMF,EAAID,OAAOL,EAAG,EAAGQ,GAAOF,EAAID,OAAOL,EAAG,IAC7CA,EAGD,QAASU,GAAUJ,EAAKK,EAAIC,EAAaH,GAE/C,IADAV,GAAIC,GAAIM,EAAIO,OACLb,MAAqB,kBAALW,IAAoBF,EAA2BH,EAAIN,KAAKW,GAAtBA,EAAGL,EAAIN,OAChE,MAAOY,GAAcZ,EAAIM,EAAIN,GAGvB,QAASc,GAAsBC,EAAIC,GACzC,MAAO,UAAAC,GAAE,MAAGA,GAAEF,KAAKA,GAAMd,EAAQgB,EAAED,QAAQf,EAAQe,ICIrC,QAASE,KAEvB,QAASC,GAAUC,GAClB,MAAuB,KAAhBA,EAAKC,SAsKb,QAASC,GAAcC,GACtB,MAAO,IAAIC,GAAQ,KAAMrB,OAAOoB,GAAME,eAIvC,QAASC,GAAgBX,EAAIQ,GAC5BxB,GAAI4B,GAAUL,EAAcC,EAE5B,OADAI,GAAQC,UAAYb,EACbY,EAIR,QAASE,GAAeC,GACvB,MAAO,IAAIC,GAAKD,GAhLjB,GAAME,GAAK,SACEX,EAAUY,GACtBC,KAAMb,SAAWA,EACjBa,KAAMD,SAAWA,EACjBC,KAAMC,+EAEPC,GAACC,YAAeC,IAAA,WACf,GAAKC,GAAIL,KAAKM,UACd,IAAKD,EAAG,MAAOA,GAAEJ,WAAWzB,EAAU6B,EAAEJ,WAAYD,MAAM,GAAQ,IAEnEE,EAACK,gBAAmBH,IAAA,WACnB,GAAKC,GAAIL,KAAKM,UACd,IAAKD,EAAG,MAAOA,GAAEJ,WAAWzB,EAAU6B,EAAEJ,WAAYD,MAAM,GAAQ,IAEnEE,EAACM,WAAcJ,IAAA,WACd,MAAQJ,MAAKC,WAAW,IAEzBC,EAACO,UAAaL,IAAA,WACb,MAAQJ,MAAKC,WAAWD,KAAKC,WAAWtB,OAAO,IAEhDmB,EAAAY,UAACC,YAAW,SAACC,GACZZ,KAAMa,aAAaD,IAEpBd,EAAAY,UAACG,aAAY,SAACD,EAAOE,GACpBF,EAAOG,SACPH,EAAON,WAAaN,KACdc,EACA3C,EAAO6B,KAAKC,WAAYa,EAAKF,GADxBZ,KAAKC,WAAWe,KAAKJ,IAGjCd,EAAAY,UAACO,aAAY,SAACL,EAAOE,GACfA,EAAIR,aAAaN,OACrBA,KAAMa,aAAaD,EAAOE,GAC1BA,EAAKC,WAGPjB,EAAAY,UAACQ,YAAW,SAACN,GACZzC,EAAQ6B,KAAKC,WAAYW,IAE1Bd,EAAAY,UAACK,OAAM,WACDf,KAAKM,YAAYN,KAAKM,WAAWY,YAAYlB,6CAKnD,IAAMH,GAAiB,SAAAC,GAAC,QAAAD,GACXD,GACXuB,EAAKC,KAACpB,KAAA,EAAG,SACTA,KAAKqB,UAAYzB,sHAElB0B,GAAAC,YAAeC,IAAA,SAAC5B,GACfI,KAAKqB,UAAYzB,GAElB0B,EAAAC,YAAenB,IAAA,WACd,MAAOJ,MAAKqB,qDATKvB,GAcbR,EAAoB,SAAAQ,GAAC,QAAAR,GACdH,EAAUY,aACrBoB,GAAKC,KAACpB,KAAAb,GAAY,EAAGY,GACrBC,KAAKyB,cACLzB,KAAK0B,cACL1B,KAAK2B,SACLC,OAAOC,eAAe7B,KAAM,aAC3BwB,IAAK,SAAAM,GAAS9B,EAAK+B,aAAa,QAASD,IACzC1B,IAAK,WAAG,MAAGJ,GAAKgC,aAAa,YAE9BJ,OAAOC,eAAe7B,KAAK2B,MAAO,WACjCH,IAAK,SAAAM,GAAS9B,EAAK+B,aAAa,QAASD,IACzC1B,IAAK,WAAG,MAAGJ,GAAKgC,aAAa,YAE9BJ,OAAOC,eAAe7B,KAAM,aAC3BwB,IAAK,SAAAM,GACJ,KAAO9B,EAAKQ,YACXR,EAAKkB,YAAYlB,EAAKQ,WAEvBR,GAAKiC,WAAaH,GAEnB1B,IAAK,WAAQ,MAAOJ,GAAKiC,+HAI3BC,GAAAC,SAAY/B,IAAA,WACX,MAAOJ,MAAKC,WAAWmC,OAAOnD,IAG/BK,EAAAoB,UAAAG,aAAY,SAACD,EAAOE,GACnBK,EAAAA,UAAMN,aAAYO,KAACpB,KAAAY,EAAOE,GACtBd,KAAKiC,aACRjC,KAAKiC,WAAa,KAIpB3C,EAAAoB,UAAAqB,aAAY,SAACM,EAAKC,GACjBtC,KAAKuC,eAAe,KAAMF,EAAKC,IAEhChD,EAAAoB,UAAAsB,aAAY,SAACK,GACZ,MAAOrC,MAAKwC,eAAe,KAAMH,IAElC/C,EAAAoB,UAAA+B,gBAAe,SAACJ,GACfrC,KAAK0C,kBAAkB,KAAML,IAG9B/C,EAAAoB,UAAA6B,eAAc,SAAC1D,EAAIC,EAAMwD,GACxBzE,GAAI8E,GAAOnE,EAAUwB,KAAKyB,WAAY7C,EAAsBC,EAAIC,GAC3D6D,IAAM3C,KAAKyB,WAAWT,KAAK2B,GAAS9D,GAAAA,EAAIC,KAAAA,IAC7C6D,EAAKL,MAAQrE,OAAOqE,IAErBhD,EAAAoB,UAAA8B,eAAc,SAAC3D,EAAIC,GAClBjB,GAAI8E,GAAOnE,EAAUwB,KAAKyB,WAAY7C,EAAsBC,EAAIC,GAChE,OAAO6D,IAAQA,EAAKL,OAErBhD,EAAAoB,UAAAgC,kBAAiB,SAAC7D,EAAIC,GACrBX,EAAO6B,KAAKyB,WAAY7C,EAAsBC,EAAIC,KAGnDQ,EAAAoB,UAAAkC,iBAAgB,SAACvD,EAAMwD,IACrB7C,KAAK0B,WAAW3D,EAAQsB,MAAWW,KAAK0B,WAAW3D,EAAQsB,SAAc2B,KAAK6B,IAEhFvD,EAAAoB,UAAAoC,oBAAmB,SAACzD,EAAMwD,GACzB1E,EAAO6B,KAAK0B,WAAW3D,EAAQsB,IAAQwD,EAAS,GAAG,IAEpDvD,EAAAoB,UAAAqC,cAAa,SAACC,GACbnF,GAECoF,GAAGnF,EAFAoF,EAAIF,EAAMG,cAAgBnD,KAC7BoD,EAAIJ,EAAMK,UAEX,IAEC,GADAJ,EAAIC,EAAExB,YAAcwB,EAAExB,WAAW3D,EAAQiF,EAAM3D,OACxC,IAAKvB,EAAEmF,EAAEtE,OAAQb,OACI,IAAtBmF,EAAEnF,GAAGsD,KAAK8B,EAAGF,KAAkBA,EAAMM,OAASF,YAE5CJ,EAAMO,WAAaH,IAAKJ,EAAMQ,SAAWR,EAAMS,OAAOP,EAAEA,EAAE5C,YACnE,QAAQ0C,EAAMU,4DA3EM5D,GAgFhB6D,EAAwB,SAAArE,GAAC,QAAAqE,KAE7BxC,EAAKC,KAACpB,KAAA,EAAG,8GAFYV,GAOjBsE,EAAM,SACCvE,EAAMwE,GAClB7D,KAAMX,KAAOA,EACbW,KAAMuD,UAAYM,EAAKN,QACvBvD,KAAMqD,aAAeQ,EAAKR,WAwC3B,OAtCAO,GAAAlD,UAACoD,gBAAe,WACf9D,KAAMwD,OAAQ,GAEfI,EAAAlD,UAACqD,yBAAwB,WACxB/D,KAAMsD,KAAOtD,KAAKwD,OAAQ,GAE3BI,EAAAlD,UAACsD,eAAc,WACdhE,KAAM0D,kBAAmB,GAsB1B,WACC7F,GAAIoG,GAAW,GAAIN,EAInB,OAHAjG,GAAOuG,EAAUA,EAASC,aAAgBD,SAAAA,EAAUN,SAAAA,EAAU7D,KAAAA,EAAMD,KAAAA,EAAMP,QAAAA,EAAS6E,WAAW7E,EAASsE,MAAAA,IACvGlG,EAAOuG,GAAYG,gBAAgBH,EAAU7E,cAAAA,EAAeI,gBAAAA,EAAiBG,eAAAA,IAC7EsE,EAAStD,YAAYsD,EAASI,KAAOjF,EAAc,SAC5C6E","file":"undom.min.js","sourcesContent":["export function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n}\n\nexport function toLower(str) {\n\treturn String(str).toLowerCase();\n}\n\nexport function splice(arr, item, add, byValueOnly) {\n\tlet i = arr ? findWhere(arr, item, true, byValueOnly) : -1;\n\tif (~i) add ? arr.splice(i, 0, add) : arr.splice(i, 1);\n\treturn i;\n}\n\nexport function findWhere(arr, fn, returnIndex, byValueOnly) {\n\tlet i = arr.length;\n\twhile (i--) if (typeof fn==='function' && !byValueOnly ? fn(arr[i]) : arr[i]===fn) break;\n\treturn returnIndex ? i : arr[i];\n}\n\nexport function createAttributeFilter(ns, name) {\n\treturn o => o.ns===ns && toLower(o.name)===toLower(name);\n}\n","import {\n\tassign,\n\ttoLower,\n\tsplice,\n\tfindWhere,\n\tcreateAttributeFilter\n} from './util';\n\n/*\nconst NODE_TYPES = {\n\tELEMENT_NODE: 1,\n\tATTRIBUTE_NODE: 2,\n\tTEXT_NODE: 3,\n\tCDATA_SECTION_NODE: 4,\n\tENTITY_REFERENCE_NODE: 5,\n\tCOMMENT_NODE: 6,\n\tPROCESSING_INSTRUCTION_NODE: 7,\n\tDOCUMENT_NODE: 9\n};\n*/\n\n\n/** Create a minimally viable DOM Document\n *\t@returns {Document} document\n */\nexport default function undom() {\n\n\tfunction isElement(node) {\n\t\treturn node.nodeType===1;\n\t}\n\n\tclass Node {\n\t\tconstructor(nodeType, nodeName) {\n\t\t\tthis.nodeType = nodeType;\n\t\t\tthis.nodeName = nodeName;\n\t\t\tthis.childNodes = [];\n\t\t}\n\t\tget nextSibling() {\n\t\t\tlet p = this.parentNode;\n\t\t\tif (p) return p.childNodes[findWhere(p.childNodes, this, true) + 1];\n\t\t}\n\t\tget previousSibling() {\n\t\t\tlet p = this.parentNode;\n\t\t\tif (p) return p.childNodes[findWhere(p.childNodes, this, true) - 1];\n\t\t}\n\t\tget firstChild() {\n\t\t\treturn this.childNodes[0];\n\t\t}\n\t\tget lastChild() {\n\t\t\treturn this.childNodes[this.childNodes.length-1];\n\t\t}\n\t\tappendChild(child) {\n\t\t\tthis.insertBefore(child);\n\t\t}\n\t\tinsertBefore(child, ref) {\n\t\t\tchild.remove();\n\t\t\tchild.parentNode = this;\n\t\t\tif (!ref) this.childNodes.push(child);\n\t\t\telse splice(this.childNodes, ref, child);\n\t\t}\n\t\treplaceChild(child, ref) {\n\t\t\tif (ref.parentNode===this) {\n\t\t\t\tthis.insertBefore(child, ref);\n\t\t\t\tref.remove();\n\t\t\t}\n\t\t}\n\t\tremoveChild(child) {\n\t\t\tsplice(this.childNodes, child);\n\t\t}\n\t\tremove() {\n\t\t\tif (this.parentNode) this.parentNode.removeChild(this);\n\t\t}\n\t}\n\n\n\tclass Text extends Node {\n\t\tconstructor(text) {\n\t\t\tsuper(3, '#text');\t\t\t\t\t// TEXT_NODE\n\t\t\tthis.nodeValue = text;\n\t\t}\n\t\tset textContent(text) {\n\t\t\tthis.nodeValue = text;\n\t\t}\n\t\tget textContent() {\n\t\t\treturn this.nodeValue;\n\t\t}\n\t}\n\n\n\tclass Element extends Node {\n\t\tconstructor(nodeType, nodeName) {\n\t\t\tsuper(nodeType || 1, nodeName);\t\t// ELEMENT_NODE\n\t\t\tthis.attributes = [];\n\t\t\tthis.__handlers = {};\n\t\t\tthis.style = {};\n\t\t\tObject.defineProperty(this, 'className', {\n\t\t\t\tset: val => { this.setAttribute('class', val); },\n\t\t\t\tget: () => this.getAttribute('class')\n\t\t\t});\n\t\t\tObject.defineProperty(this.style, 'cssText', {\n\t\t\t\tset: val => { this.setAttribute('style', val); },\n\t\t\t\tget: () => this.getAttribute('style')\n\t\t\t});\n\t\t\tObject.defineProperty(this, 'innerHTML', {\n\t\t\t\tset: val => {\n\t\t\t\t\twhile (this.firstChild) {\n\t\t\t\t\t\tthis.removeChild(this.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tthis._innerHTML = val;\n\t\t\t\t},\n\t\t\t\tget: () => { return this._innerHTML; }\n\t\t\t});\n\t\t}\n\n\t\tget children() {\n\t\t\treturn this.childNodes.filter(isElement);\n\t\t}\n\n\t\tinsertBefore(child, ref) {\n\t\t\tsuper.insertBefore(child, ref);\n\t\t\tif (this._innerHTML) {\n\t\t\t\tthis._innerHTML = '';\n\t\t\t}\n\t\t}\n\n\t\tsetAttribute(key, value) {\n\t\t\tthis.setAttributeNS(null, key, value);\n\t\t}\n\t\tgetAttribute(key) {\n\t\t\treturn this.getAttributeNS(null, key);\n\t\t}\n\t\tremoveAttribute(key) {\n\t\t\tthis.removeAttributeNS(null, key);\n\t\t}\n\n\t\tsetAttributeNS(ns, name, value) {\n\t\t\tlet attr = findWhere(this.attributes, createAttributeFilter(ns, name));\n\t\t\tif (!attr) this.attributes.push(attr = { ns, name });\n\t\t\tattr.value = String(value);\n\t\t}\n\t\tgetAttributeNS(ns, name) {\n\t\t\tlet attr = findWhere(this.attributes, createAttributeFilter(ns, name));\n\t\t\treturn attr && attr.value;\n\t\t}\n\t\tremoveAttributeNS(ns, name) {\n\t\t\tsplice(this.attributes, createAttributeFilter(ns, name));\n\t\t}\n\n\t\taddEventListener(type, handler) {\n\t\t\t(this.__handlers[toLower(type)] || (this.__handlers[toLower(type)] = [])).push(handler);\n\t\t}\n\t\tremoveEventListener(type, handler) {\n\t\t\tsplice(this.__handlers[toLower(type)], handler, 0, true);\n\t\t}\n\t\tdispatchEvent(event) {\n\t\t\tlet t = event.currentTarget = this,\n\t\t\t\tc = event.cancelable,\n\t\t\t\tl, i;\n\t\t\tdo {\n\t\t\t\tl = t.__handlers && t.__handlers[toLower(event.type)];\n\t\t\t\tif (l) for (i=l.length; i--; ) {\n\t\t\t\t\tif ((l[i].call(t, event)===false || event._end) && c) break;\n\t\t\t\t}\n\t\t\t} while (event.bubbles && !(c && event._stop) && (event.target=t=t.parentNode));\n\t\t\treturn !event.defaultPrevented;\n\t\t}\n\t}\n\n\n\tclass Document extends Element {\n\t\tconstructor() {\n\t\t\tsuper(9, '#document');\t\t\t// DOCUMENT_NODE\n\t\t}\n\t}\n\n\n\tclass Event {\n\t\tconstructor(type, opts) {\n\t\t\tthis.type = type;\n\t\t\tthis.bubbles = !!opts.bubbles;\n\t\t\tthis.cancelable = !!opts.cancelable;\n\t\t}\n\t\tstopPropagation() {\n\t\t\tthis._stop = true;\n\t\t}\n\t\tstopImmediatePropagation() {\n\t\t\tthis._end = this._stop = true;\n\t\t}\n\t\tpreventDefault() {\n\t\t\tthis.defaultPrevented = true;\n\t\t}\n\t}\n\n\n\tfunction createElement(type) {\n\t\treturn new Element(null, String(type).toUpperCase());\n\t}\n\n\n\tfunction createElementNS(ns, type) {\n\t\tlet element = createElement(type);\n\t\telement.namespace = ns;\n\t\treturn element;\n\t}\n\n\n\tfunction createTextNode(text) {\n\t\treturn new Text(text);\n\t}\n\n\n\tfunction createDocument() {\n\t\tlet document = new Document();\n\t\tassign(document, document.defaultView = { document, Document, Node, Text, Element, SVGElement:Element, Event });\n\t\tassign(document, { documentElement:document, createElement, createElementNS, createTextNode });\n\t\tdocument.appendChild(document.body = createElement('body'));\n\t\treturn document;\n\t}\n\n\n\treturn createDocument();\n}\n"]}